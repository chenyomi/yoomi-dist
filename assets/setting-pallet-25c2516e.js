import{b as v}from"./request-8e1b1635.js";import{a as W,V as m}from"./VRow-d75b5f82.js";import{V as b}from"./VTextField-078820a9.js";import{V as L}from"./VMenu-82aac33c.js";import{V as X}from"./VContainer-069e6266.js";import{i as h,a as x,b as T,q as w,w as s,e as t,h as e,G as B,o as A,n as F,B as N,L as Y,A as _,t as k}from"./index-db10600d.js";import{V as R}from"./VDataTableVirtual-c583511b.js";import{V as j}from"./VCheckbox-e91a44e5.js";import"./index-c00940a8.js";/* empty css              */import"./VInput-77accd7e.js";import"./VImg-663304c0.js";import"./VAvatar-039e85c6.js";import"./VDivider-5b514e0a.js";import"./VOverlay-559319d5.js";import"./VDataTable-178ee7fd.js";import"./VSelect-4ee12ab2.js";import"./VCheckboxBtn-0f686395.js";const D={layerboardList(u){return v("/sss/layerboard/list",u,"get")},layerboardEdit(u){return v("/sss/layerboard",u,u.id?"put":"post")}},C={__name:"setting-pallet-form",props:{data:{type:Object}},setup(u,{expose:V}){const p=u,d=h("density"),l=x(p.data);return V({submit:()=>new Promise(f=>{D.layerboardEdit(l.value).finally(()=>{f()})})}),(f,a)=>(T(),w(X,null,{default:s(()=>[t(W,null,{default:s(()=>[t(m,{cols:"6",class:"text-center"},{default:s(()=>[t(b,{modelValue:e(l).layerBoardName,"onUpdate:modelValue":a[0]||(a[0]=o=>e(l).layerBoardName=o),label:"托板名称：",density:e(d)},null,8,["modelValue","density"])]),_:1}),t(m,{cols:"6",class:"text-center"},{default:s(()=>[t(b,{modelValue:e(l).layerBoardCode,"onUpdate:modelValue":a[1]||(a[1]=o=>e(l).layerBoardCode=o),label:"编号：",density:e(d)},null,8,["modelValue","density"])]),_:1}),t(m,{cols:"6",class:"text-center"},{default:s(()=>[t(b,{modelValue:e(l).layerBoardThickness,"onUpdate:modelValue":a[2]||(a[2]=o=>e(l).layerBoardThickness=o),label:"厚度：",density:e(d)},null,8,["modelValue","density"])]),_:1}),t(m,{cols:"6",class:"text-center"}),t(m,{cols:"6",class:"text-center"},{default:s(()=>[t(L,{class:"ma-1",color:"#FF9800"},{default:s(()=>[B(" X轴方向 ")]),_:1})]),_:1}),t(m,{cols:"6",class:"text-center"},{default:s(()=>[t(L,{class:"ma-1",color:"#4CAF50"},{default:s(()=>[B(" Y轴方向 ")]),_:1})]),_:1}),t(m,{cols:"6"},{default:s(()=>[t(b,{modelValue:e(l).layerBoardLengthX,"onUpdate:modelValue":a[3]||(a[3]=o=>e(l).layerBoardLengthX=o),label:"尺寸：",density:e(d),suffix:"mm",class:"mb-2"},null,8,["modelValue","density"])]),_:1}),t(m,{cols:"6"},{default:s(()=>[t(b,{modelValue:e(l).layerBoardLengthY,"onUpdate:modelValue":a[4]||(a[4]=o=>e(l).layerBoardLengthY=o),label:"尺寸：",density:e(d),suffix:"mm",class:"mb-2"},null,8,["modelValue","density"])]),_:1})]),_:1})]),_:1}))}},le={__name:"setting-pallet",setup(u){const V=h("density"),p=x(),d=x([]),l=x(!0);let c=[];setTimeout(()=>{l.value=!1},1e3);const f=()=>{D.layerboardList().then(n=>{d.value=n.rows,p.value=n.rows[0].id,a.value[1].slotData=n.rows[0]})},a=h("btnList");A(()=>{F(()=>{a.value=[{name:"新增",color:"#42A5F5",size:"large",width:80,formWidth:800,slot:_(C),fn:({close:n,openLoading:y,closeLoading:r,diaFormRef:i})=>{y({text:"正在上传更新"}),i.submit().finally(()=>{n(),setTimeout(()=>{f(),r()},2e3)})}},{name:"编辑",color:"#00ACC1",size:"large",width:150,formWidth:800,slot:_(C),fn:({close:n,openLoading:y,closeLoading:r,diaFormRef:i})=>{y({text:"正在上传更新"}),i.submit().finally(()=>{n(),setTimeout(()=>{f(),r()},2e3)})}}]})});const{t:o}=N(),U=x([{align:"start",sortable:!1,key:"exclusive",fixed:!0,minWidth:70,width:70},{title:o("名称"),align:"start",sortable:!1,key:"layerBoardName",minWidth:90},{title:o("编号"),key:"layerBoardCode",align:"center",sortable:!1,minWidth:90},{title:o("厚度"),key:"layerBoardThickness",align:"center",sortable:!1,minWidth:90},{title:o("尺寸")+"（X-Y）",key:"layerBoardLengthX",align:"center",sortable:!1,minWidth:90}]);return(n,y)=>(T(),w(R,{"fixed-header":"",headers:e(U),items:e(d),loading:e(l),"loading-text":"",hover:"",height:"calc(100vh - 175px)","expand-on-click":"",density:e(V),"onUpdate:options":f,"onUpdate:expanded":y[0]||(y[0]=r=>{r.map(i=>{e(c).includes(i)||(p.value=i,e(a)[1].slotData=e(d).filter(g=>g.id==i)[0])}),e(c).map(i=>{r.includes(i)||(p.value=i,e(a)[1].slotData=e(d).filter(g=>g.id==i)[0])}),Y(c)?c.value=r:c=r})},{"item.exclusive":s(({item:r})=>[t(j,{"model-value":r.id==e(p),readonly:""},null,8,["model-value"])]),"item.layerBoardLengthX":s(({item:r})=>[B(k(r.layerBoardLengthX)+"-"+k(r.layerBoardLengthY),1)]),loading:s(()=>[]),_:1},8,["headers","items","loading","density"]))}};export{le as default};
