import{b as k}from"./request-906bf077.js";import{g as W,a as Y}from"./utils-79b8b97a.js";import{l as w}from"./lodash-776d67be.js";import{a as A,V as u}from"./VRow-daef3575.js";import{V as m}from"./VTextField-b50f4200.js";import{V as F}from"./VSelect-14a48aff.js";import{V as D}from"./VMenu-c044b62a.js";import{V as N}from"./VContainer-4ca92a73.js";import{i as L,a as V,b as C,q as U,w as o,e as l,h as e,G as g,B as R,o as j,n as B,L as E,A as X,t as b}from"./index-33a3edc6.js";import{V as H}from"./VDataTableVirtual-334d7e87.js";import{V as q}from"./VCheckbox-37c2f36c.js";import"./index-65a6e8b1.js";/* empty css              */import"./VInput-b14eee4a.js";import"./VImg-377ae230.js";import"./VOverlay-79039b71.js";import"./VCheckboxBtn-5fc0691f.js";import"./VAvatar-42af6748.js";import"./VDivider-41704ff6.js";import"./VDataTable-688bfef0.js";const z={fixtureList(f){return k("/sss/fixture/list",f,"get")},fixtureEdit(f){return k("/sss/fixture",f,f.id?"put":"post")}},_={__name:"setting-clamp-form",props:{data:{type:Object}},setup(f,{expose:h}){const x=f,r=L("density"),t=V(w.cloneDeep(x.data)),p=()=>new Promise(c=>{z.fixtureEdit(t.value).finally(()=>{c()})}),v=W("sss_fixture_type");return h({submit:p}),(c,s)=>(C(),U(N,null,{default:o(()=>[l(A,null,{default:o(()=>[l(u,{cols:"6",class:"text-center"},{default:o(()=>[l(m,{modelValue:e(t).fixtureName,"onUpdate:modelValue":s[0]||(s[0]=i=>e(t).fixtureName=i),label:"夹具名称：",density:e(r)},null,8,["modelValue","density"])]),_:1}),l(u,{cols:"6",class:"text-center"},{default:o(()=>[l(m,{modelValue:e(t).fixtureCode,"onUpdate:modelValue":s[1]||(s[1]=i=>e(t).fixtureCode=i),label:"编号：",density:e(r)},null,8,["modelValue","density"])]),_:1}),l(u,{cols:"6",class:"text-center"},{default:o(()=>[l(F,{modelValue:e(t).fixtureType,"onUpdate:modelValue":s[2]||(s[2]=i=>e(t).fixtureType=i),density:e(r),items:e(v),label:"类型："},null,8,["modelValue","density","items"])]),_:1}),l(u,{cols:"6",class:"text-center"},{default:o(()=>[l(m,{modelValue:e(t).fixtureTongsHeight,"onUpdate:modelValue":s[3]||(s[3]=i=>e(t).fixtureTongsHeight=i),label:"钳高：",density:e(r)},null,8,["modelValue","density"])]),_:1}),l(u,{cols:"6",class:"text-center"},{default:o(()=>[l(m,{modelValue:e(t).fixtureDepth,"onUpdate:modelValue":s[4]||(s[4]=i=>e(t).fixtureDepth=i),label:"夹深：",density:e(r)},null,8,["modelValue","density"])]),_:1}),l(u,{cols:"6",class:"text-center"}),l(u,{cols:"6",class:"text-center"},{default:o(()=>[l(D,{class:"ma-1",color:"#FF9800"},{default:o(()=>[g(" X轴方向 ")]),_:1})]),_:1}),l(u,{cols:"6",class:"text-center"},{default:o(()=>[l(D,{class:"ma-1",color:"#4CAF50"},{default:o(()=>[g(" Y轴方向 ")]),_:1})]),_:1}),l(u,{cols:"6"},{default:o(()=>[l(m,{modelValue:e(t).fixtureSizeX,"onUpdate:modelValue":s[5]||(s[5]=i=>e(t).fixtureSizeX=i),label:"尺寸：",density:e(r),suffix:"mm",class:"mb-2"},null,8,["modelValue","density"]),l(m,{modelValue:e(t).fixtureLocateX,"onUpdate:modelValue":s[6]||(s[6]=i=>e(t).fixtureLocateX=i),label:"定位：",density:e(r),suffix:"mm",class:"mb-2"},null,8,["modelValue","density"])]),_:1}),l(u,{cols:"6"},{default:o(()=>[l(m,{modelValue:e(t).fixtureSizeY,"onUpdate:modelValue":s[7]||(s[7]=i=>e(t).fixtureSizeY=i),label:"尺寸：",density:e(r),suffix:"mm",class:"mb-2"},null,8,["modelValue","density"]),l(m,{modelValue:e(t).fixtureLocateY,"onUpdate:modelValue":s[8]||(s[8]=i=>e(t).fixtureLocateY=i),label:"定位：",density:e(r),suffix:"mm",class:"mb-2"},null,8,["modelValue","density"])]),_:1})]),_:1})]),_:1}))}},de={__name:"setting-clamp",setup(f){const h=L("density"),x=V();let r=[];const{t}=R(),p=V([]),v=V(!0);setTimeout(()=>{v.value=!1},1e3);const c=()=>{z.fixtureList().then(d=>{p.value=d.rows,x.value=d.rows[0].id,i.value[1].slotData=d.rows[0]})};let s=V();s.value=Y("sss_fixture_type");const i=L("btnList");j(()=>{B(()=>{i.value=[{name:"新增",color:"#42A5F5",size:"large",width:80,formWidth:800,slot:X(_),fn:({close:d,openLoading:y,closeLoading:a,diaFormRef:n})=>{y({text:"正在上传更新"}),n.submit().finally(()=>{d(),setTimeout(()=>{c(),a()},2e3)})}},{name:"编辑",color:"#00ACC1",size:"large",width:150,formWidth:800,slot:X(_),fn:({close:d,openLoading:y,closeLoading:a,diaFormRef:n})=>{y({text:"正在上传更新"}),n.submit().finally(()=>{d(),setTimeout(()=>{c(),a()},2e3)})}}]})});const S=V([{align:"start",sortable:!1,key:"exclusive",fixed:!0,minWidth:70,width:70},{title:t("名称"),align:"start",sortable:!1,key:"fixtureName",minWidth:120},{title:t("编号"),key:"fixtureCode",align:"center",sortable:!1,minWidth:90},{title:t("类型"),key:"fixtureType",align:"center",sortable:!1,minWidth:90},{title:t("钳高"),key:"fixtureTongsHeight",align:"center",sortable:!1,minWidth:90},{title:t("夹深"),key:"fixtureDepth",align:"center",sortable:!1,minWidth:90},{title:t("尺寸")+"（X-Y）",key:"fixtureSizeX",align:"center",sortable:!1,minWidth:120},{title:t("定位")+"（X-Y）",key:"fixtureLocateX",align:"center",sortable:!1,minWidth:120}]);return(d,y)=>(C(),U(H,{"fixed-header":"",headers:e(S),items:e(p),loading:e(v),"loading-text":"",hover:"",height:"calc(100vh - 175px)","expand-on-click":"",density:e(h),"onUpdate:options":c,"onUpdate:expanded":y[0]||(y[0]=a=>{a.map(n=>{e(r).includes(n)||(x.value=n,e(i)[1].slotData=e(p).filter(T=>T.id==n)[0])}),e(r).map(n=>{a.includes(n)||(x.value=n,e(i)[1].slotData=e(p).filter(T=>T.id==n)[0])}),E(r)?r.value=a:r=a})},{"item.exclusive":o(({item:a})=>[l(q,{"model-value":a.id==e(x),readonly:""},null,8,["model-value"])]),"item.fixtureType":o(({item:a})=>[g(b(e(s)[a.fixtureType]),1)]),"item.fixtureSizeX":o(({item:a})=>[g(b(a.fixtureSizeX)+"-"+b(a.fixtureSizeY),1)]),"item.fixtureLocateX":o(({item:a})=>[g(b(a.fixtureLocateX)+"-"+b(a.fixtureLocateY),1)]),loading:o(()=>[]),_:1},8,["headers","items","loading","density"]))}};export{de as default};
