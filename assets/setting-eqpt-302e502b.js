import{b as D}from"./request-8e1b1635.js";import{l as T}from"./lodash-bf846e34.js";import{a as v,V as u}from"./VRow-d75b5f82.js";import{V as m}from"./VTextField-078820a9.js";import{V as C}from"./VMenu-82aac33c.js";import{V as F}from"./VContainer-069e6266.js";import{i as X,a as V,b as Y,q as Z,w as s,e as t,h as e,G as h,B as S,o as A,n as L,L as B,A as k,t as c}from"./index-db10600d.js";import{V as N}from"./VDataTableVirtual-c583511b.js";import{V as R}from"./VCheckbox-e91a44e5.js";import"./index-c00940a8.js";/* empty css              */import"./VInput-77accd7e.js";import"./VImg-663304c0.js";import"./VAvatar-039e85c6.js";import"./VDivider-5b514e0a.js";import"./VOverlay-559319d5.js";import"./VDataTable-178ee7fd.js";import"./VSelect-4ee12ab2.js";import"./VCheckboxBtn-0f686395.js";const w={deviceList(p){return D("/sss/machinery/list",p,"get")},deviceEdit(p){return D("/sss/machinery",p,p.id?"put":"post")}},U={__name:"setting-eqpt-form",props:{data:{type:Object}},setup(p,{expose:y}){const x=p,o=X("density"),l=V(T.cloneDeep(x.data));return y({submit:()=>new Promise(b=>{w.deviceEdit(l.value).finally(()=>{b()})})}),(b,a)=>(Y(),Z(F,null,{default:s(()=>[t(v,null,{default:s(()=>[t(u,{cols:"4"},{default:s(()=>[t(m,{modelValue:e(l).machineryName,"onUpdate:modelValue":a[0]||(a[0]=i=>e(l).machineryName=i),label:"设备名称：",density:e(o),class:"mb-2"},null,8,["modelValue","density"])]),_:1})]),_:1}),t(v,null,{default:s(()=>[t(u,{cols:"4"},{default:s(()=>[t(m,{modelValue:e(l).machineryProductionDelay,"onUpdate:modelValue":a[1]||(a[1]=i=>e(l).machineryProductionDelay=i),label:"生产延时：",density:e(o),suffix:"s",class:"mb-2"},null,8,["modelValue","density"])]),_:1}),t(u,{cols:"4"},{default:s(()=>[t(m,{modelValue:e(l).machinerySwitchDelay,"onUpdate:modelValue":a[2]||(a[2]=i=>e(l).machinerySwitchDelay=i),label:"切换延时：",density:e(o),suffix:"s",class:"mb-2"},null,8,["modelValue","density"])]),_:1}),t(u,{cols:"4"},{default:s(()=>[t(m,{modelValue:e(l).machineryStartDelay,"onUpdate:modelValue":a[3]||(a[3]=i=>e(l).machineryStartDelay=i),label:"启动延时：",density:e(o),suffix:"s",class:"mb-2"},null,8,["modelValue","density"])]),_:1})]),_:1}),t(v,null,{default:s(()=>[t(u,{cols:"4",class:"text-center"},{default:s(()=>[t(C,{class:"ma-1",color:"#FF9800"},{default:s(()=>[h(" X轴方向 ")]),_:1})]),_:1}),t(u,{cols:"4",class:"text-center"},{default:s(()=>[t(C,{class:"ma-1",color:"#4CAF50"},{default:s(()=>[h(" Y轴方向 ")]),_:1})]),_:1}),t(u,{cols:"4",class:"text-center"},{default:s(()=>[t(C,{class:"ma-1",color:"#2196F3"},{default:s(()=>[h(" Z轴方向 ")]),_:1})]),_:1}),t(u,{cols:"4"},{default:s(()=>[t(m,{modelValue:e(l).machineryCalibrateX,"onUpdate:modelValue":a[4]||(a[4]=i=>e(l).machineryCalibrateX=i),label:"校准设定值：",density:e(o),suffix:"mm",class:"mb-2"},null,8,["modelValue","density"]),t(m,{modelValue:e(l).machineryMinX,"onUpdate:modelValue":a[5]||(a[5]=i=>e(l).machineryMinX=i),label:"最小定位：",density:e(o),suffix:"mm",class:"mb-2"},null,8,["modelValue","density"]),t(m,{modelValue:e(l).machineryMaxX,"onUpdate:modelValue":a[6]||(a[6]=i=>e(l).machineryMaxX=i),label:"最大定位：",density:e(o),suffix:"mm",class:"mb-2"},null,8,["modelValue","density"])]),_:1}),t(u,{cols:"4"},{default:s(()=>[t(m,{modelValue:e(l).machineryCalibrateY,"onUpdate:modelValue":a[7]||(a[7]=i=>e(l).machineryCalibrateY=i),label:"校准设定值：",density:e(o),suffix:"mm",class:"mb-2"},null,8,["modelValue","density"]),t(m,{modelValue:e(l).machineryMinY,"onUpdate:modelValue":a[8]||(a[8]=i=>e(l).machineryMinY=i),label:"最小定位：",density:e(o),suffix:"mm",class:"mb-2"},null,8,["modelValue","density"]),t(m,{modelValue:e(l).machineryMaxY,"onUpdate:modelValue":a[9]||(a[9]=i=>e(l).machineryMaxY=i),label:"最大定位：",density:e(o),suffix:"mm",class:"mb-2"},null,8,["modelValue","density"])]),_:1}),t(u,{cols:"4"},{default:s(()=>[t(m,{modelValue:e(l).machineryCalibrateZ,"onUpdate:modelValue":a[10]||(a[10]=i=>e(l).machineryCalibrateZ=i),label:"校准设定值：",density:e(o),suffix:"mm",class:"mb-2"},null,8,["modelValue","density"]),t(m,{modelValue:e(l).machineryMinZ,"onUpdate:modelValue":a[11]||(a[11]=i=>e(l).machineryMinZ=i),label:"最小定位：",density:e(o),suffix:"mm",class:"mb-2"},null,8,["modelValue","density"]),t(m,{modelValue:e(l).machineryMaxZ,"onUpdate:modelValue":a[12]||(a[12]=i=>e(l).machineryMaxZ=i),label:"最大定位：",density:e(o),suffix:"mm",class:"mb-2"},null,8,["modelValue","density"])]),_:1})]),_:1})]),_:1}))}},ne={__name:"setting-eqpt",setup(p){const{t:y}=S(),x=X("density"),o=V();let l=[];const M=V(!0),b=X("btnList"),a=V(),i=()=>{setTimeout(()=>{M.value=!1},1e3),w.deviceList().then(d=>{a.value=d.rows,o.value=d.rows[0].id,b.value[1].slotData=d.rows[0]})};A(()=>{L(()=>{b.value=[{name:"新增",color:"#42A5F5",size:"large",width:80,formWidth:800,slot:k(U),mark:"是否保存并上传更新数据？",fn:({close:d,openLoading:f,closeLoading:n,diaFormRef:r})=>{f({text:"正在上传更新"}),r.submit().finally(()=>{d(),setTimeout(()=>{i(),n()},2e3)})}},{name:"编辑",color:"#00ACC1",size:"large",width:80,formWidth:800,slot:k(U),mark:"是否保存并上传更新数据？",fn:({close:d,openLoading:f,closeLoading:n,diaFormRef:r})=>{f({text:"正在上传更新"}),r.submit().finally(()=>{d(),setTimeout(()=>{i(),n()},2e3)})}},{name:"保存",color:"#66BB6A",icon:"bx-cloud-upload",size:"large",width:220,mark:"是否保存并上传更新数据？",fn:({close:d,openLoading:f,closeLoading:n,diaFormRef:r})=>{f({text:"正在上传更新"}),d(),setTimeout(()=>{n()},2e3)}}]})});const W=V([{align:"start",sortable:!1,key:"exclusive",fixed:!0,width:70,minWidth:70},{title:y("名称"),align:"start",sortable:!1,key:"machineryName",minWidth:120},{title:y("生产延时"),key:"machineryProductionDelay",align:"center",sortable:!1,minWidth:90},{title:y("切换延时"),key:"machinerySwitchDelay",align:"center",sortable:!1,minWidth:90},{title:y("启动延时"),key:"machineryStartDelay",align:"center",sortable:!1,minWidth:90},{title:y("校准设定值")+"（X-Y-Z）",key:"machineryCalibrateX",align:"center",sortable:!1,minWidth:160},{title:y("最小定位")+"（X-Y-Z）",key:"machineryMinX",align:"center",sortable:!1,minWidth:140},{title:y("最大定位")+"（X-Y-Z）",key:"machineryMaxX",align:"center",sortable:!1,minWidth:140}]);return(d,f)=>(Y(),Z(N,{"fixed-header":"",headers:e(W),items:e(a),loading:e(M),"loading-text":"",hover:"",height:"calc(100vh - 175px)","expand-on-click":"",density:e(x),"onUpdate:options":i,"onUpdate:expanded":f[0]||(f[0]=n=>{n.map(r=>{e(l).includes(r)||(o.value=r,e(b)[1].slotData=e(a).filter(g=>g.id==r)[0])}),e(l).map(r=>{n.includes(r)||(o.value=r,e(b)[1].slotData=e(a).filter(g=>g.id==r)[0])}),B(l)?l.value=n:l=n})},{"item.exclusive":s(({item:n})=>[t(R,{"model-value":n.id==e(o),readonly:""},null,8,["model-value"])]),"item.machineryCalibrateX":s(({item:n})=>[h(c(n.machineryCalibrateX)+"-"+c(n.machineryCalibrateY)+"-"+c(n.machineryCalibrateZ),1)]),"item.machineryMinX":s(({item:n})=>[h(c(n.machineryMinX)+"-"+c(n.machineryMinY)+"-"+c(n.machineryMinZ),1)]),"item.machineryMaxX":s(({item:n})=>[h(c(n.machineryMaxX)+"-"+c(n.machineryMaxY)+"-"+c(n.machineryMaxZ),1)]),loading:s(()=>[]),_:1},8,["headers","items","loading","density"]))}};export{ne as default};
