import{b as C}from"./request-906bf077.js";import{_ as X}from"./modal-e066098e.js";import{g as B,a as R}from"./utils-79b8b97a.js";import{c as Y}from"./createMaterial-5bb52805.js";import{a as h,o as U,K as Z,b as w,d as W,i as k,q as $,w as a,e as t,h as e,G as x,B as j,n as E,L as O,R as G,A as L,t as y,f as I,I as M}from"./index-33a3edc6.js";import{l as q}from"./lodash-776d67be.js";import{a as z,V as f}from"./VRow-daef3575.js";import{V as b}from"./VTextField-b50f4200.js";import{V as K}from"./VSelect-14a48aff.js";import{V as D}from"./VMenu-c044b62a.js";import{V as P}from"./VContainer-4ca92a73.js";import{V as H}from"./VDataTableVirtual-334d7e87.js";import{V as J}from"./VCheckbox-37c2f36c.js";import"./index-65a6e8b1.js";import"./VCard-7447110c.js";import"./VAvatar-42af6748.js";import"./VImg-377ae230.js";/* empty css              */import"./VDialog-9c98ca3b.js";import"./VOverlay-79039b71.js";import"./VInput-b14eee4a.js";import"./OrbitControls-6e5a6999.js";import"./VCheckboxBtn-5fc0691f.js";import"./VDivider-41704ff6.js";import"./VDataTable-688bfef0.js";const A={materialList(d){return C("/sss/materialtemplate/list",d,"get")},materialEdit(d){return C("/sss/materialtemplate",d,d.id?"put":"post")}},Q={id:"box",style:{width:"100%",height:"400px"}},ee={__name:"setting-material-3d",props:{data:{type:Object}},setup(d){const p=h(d.data);let n=null;return U(()=>{setTimeout(()=>{n=new Y(p.value)},500)}),Z(()=>{n.disWebGl()}),(s,u)=>(w(),W("div",Q))}},F={__name:"setting-material-form",props:{data:{type:Object}},setup(d,{expose:_}){const p=d,n=k("density"),s=h(q.cloneDeep(p.data)),u=B("sss_material_template_shape");return _({submit:()=>new Promise(c=>{A.materialEdit(s.value).finally(()=>{c()})})}),(c,i)=>(w(),$(P,null,{default:a(()=>[t(z,null,{default:a(()=>[t(f,{cols:"6",class:"text-center"},{default:a(()=>[t(b,{modelValue:e(s).materialTemplateName,"onUpdate:modelValue":i[0]||(i[0]=o=>e(s).materialTemplateName=o),label:"名称：",density:e(n)},null,8,["modelValue","density"])]),_:1}),t(f,{cols:"6",class:"text-center"},{default:a(()=>[t(K,{modelValue:e(s).materialTemplateShape,"onUpdate:modelValue":i[1]||(i[1]=o=>e(s).materialTemplateShape=o),density:e(n),items:e(u),label:"形状："},null,8,["modelValue","density","items"])]),_:1}),t(f,{cols:"4",class:"text-center"},{default:a(()=>[t(D,{class:"ma-1",color:"#FF9800"},{default:a(()=>[x(" X轴方向 ")]),_:1})]),_:1}),t(f,{cols:"4",class:"text-center"},{default:a(()=>[t(D,{class:"ma-1",color:"#4CAF50"},{default:a(()=>[x(" Y轴方向 ")]),_:1})]),_:1}),t(f,{cols:"4",class:"text-center"},{default:a(()=>[t(D,{class:"ma-1",color:"#4CAF50"},{default:a(()=>[x(" Z轴方向 ")]),_:1})]),_:1}),t(f,{cols:"4"},{default:a(()=>[t(b,{modelValue:e(s).materialTemplateLengthX,"onUpdate:modelValue":i[2]||(i[2]=o=>e(s).materialTemplateLengthX=o),label:"尺寸：",density:e(n),suffix:"mm",class:"mb-2"},null,8,["modelValue","density"])]),_:1}),t(f,{cols:"4"},{default:a(()=>[t(b,{modelValue:e(s).materialTemplateLengthY,"onUpdate:modelValue":i[3]||(i[3]=o=>e(s).materialTemplateLengthY=o),label:"尺寸：",density:e(n),suffix:"mm",class:"mb-2"},null,8,["modelValue","density"])]),_:1}),t(f,{cols:"4"},{default:a(()=>[t(b,{modelValue:e(s).materialTemplateLengthZ,"onUpdate:modelValue":i[4]||(i[4]=o=>e(s).materialTemplateLengthZ=o),label:"尺寸：",density:e(n),suffix:"mm",class:"mb-2"},null,8,["modelValue","density"])]),_:1})]),_:1})]),_:1}))}},te={style:{"text-align":"end"}},we={__name:"setting-material",setup(d){const{t:_}=j(),p=h([]),n=h(!0),s=k("density"),u=h(),T=h();let c=[];setTimeout(()=>{n.value=!1},1e3);const i=()=>{A.materialList().then(m=>{p.value=m.rows,u.value=m.rows[0].id,V.value[1].slotData=m.rows[0]})};let o=h();o.value=R("sss_material_template_shape");const V=k("btnList");U(()=>{E(()=>{V.value=[{name:"新增",color:"#42A5F5",size:"large",width:80,formWidth:800,slot:L(F),fn:({close:m,openLoading:g,closeLoading:l,diaFormRef:r})=>{g({text:"正在上传更新"}),r.submit().finally(()=>{m(),setTimeout(()=>{i(),l()},2e3)})}},{name:"编辑",color:"#00ACC1",size:"large",width:150,formWidth:800,slot:L(F),fn:({close:m,openLoading:g,closeLoading:l,diaFormRef:r})=>{g({text:"正在上传更新"}),r.submit().finally(()=>{m(),setTimeout(()=>{i(),l()},2e3)})}}]})});const N=h([{align:"start",sortable:!1,key:"exclusive",fixed:!0,minWidth:70,width:70},{title:_("名称"),align:"start",sortable:!1,key:"materialTemplateName",minWidth:90},{title:_("形状"),key:"materialTemplateShape",align:"center",sortable:!1,minWidth:90},{title:_("尺寸")+"（X-Y-Z）",key:"materialTemplateLengthX",align:"center",sortable:!1,minWidth:90}]),S=()=>{T.value.open({formWidth:600,hideDiaName:!0,hideDiaOk:!0,hideDiaCancel:!0,slot:L(ee),slotData:p.value.filter(m=>m.id==u.value)[0],fn:({close:m,openLoading:g,closeLoading:l,diaFormRef:r})=>{}})};return(m,g)=>(w(),W(G,null,[t(H,{"fixed-header":"",headers:e(N),items:e(p),loading:e(n),"loading-text":"",hover:"",height:"calc(100vh - 230px)","expand-on-click":"",density:e(s),"onUpdate:options":i,"onUpdate:expanded":g[0]||(g[0]=l=>{l.map(r=>{e(c).includes(r)||(u.value=r,e(V)[1].slotData=e(p).filter(v=>v.id==r)[0])}),e(c).map(r=>{l.includes(r)||(u.value=r,e(V)[1].slotData=e(p).filter(v=>v.id==r)[0])}),O(c)?c.value=l:c=l})},{"item.exclusive":a(({item:l})=>[t(J,{"model-value":l.id==e(u),readonly:""},null,8,["model-value"])]),"item.materialTemplateShape":a(({item:l})=>[x(y(e(o)[l.materialTemplateShape]),1)]),"item.materialTemplateLengthX":a(({item:l})=>[x(y(l.materialTemplateLengthX)+"-"+y(l.materialTemplateLengthY)+"-"+y(l.materialTemplateLengthZ),1)]),loading:a(()=>[]),bottom:a(()=>[I("div",te,[t(M,{class:"ma-2 w-25",onClick:S},{default:a(()=>[x(y(m.$t("预览")),1)]),_:1})])]),_:1},8,["headers","items","loading","density"]),t(X,{ref_key:"modal",ref:T},null,512)],64))}};export{we as default};
