import{b as _}from"./request-906bf077.js";import{l as T}from"./lodash-776d67be.js";import{a as W,V as r}from"./VRow-daef3575.js";import{V as b}from"./VTextField-b50f4200.js";import{V as B}from"./VMenu-c044b62a.js";import{V as X}from"./VContainer-4ca92a73.js";import{i as v,a as y,b as w,q as D,w as l,e as t,h as e,G as g,B as F,o as N,n as Y,L as Z,A as C,t as L}from"./index-33a3edc6.js";import{V as R}from"./VDataTableVirtual-334d7e87.js";import{V as E}from"./VCheckbox-37c2f36c.js";import"./index-65a6e8b1.js";/* empty css              */import"./VInput-b14eee4a.js";import"./VImg-377ae230.js";import"./VAvatar-42af6748.js";import"./VDivider-41704ff6.js";import"./VOverlay-79039b71.js";import"./VDataTable-688bfef0.js";import"./VSelect-14a48aff.js";import"./VCheckboxBtn-5fc0691f.js";const U={boxList(x){return _("/sss/materialbox/list",x,"get")},boxEdit(x){return _("/sss/materialbox",x,x.id?"put":"post")}},k={__name:"setting-box-form",props:{data:{type:Object}},setup(x,{expose:f}){const p=x,m=v("density"),s=y(T.cloneDeep(p.data));return f({submit:()=>new Promise(d=>{U.boxEdit(s.value).finally(()=>{d()})})}),(d,a)=>(w(),D(X,null,{default:l(()=>[t(W,null,{default:l(()=>[t(r,{cols:"6",class:"text-center"},{default:l(()=>[t(b,{modelValue:e(s).materialBoxName,"onUpdate:modelValue":a[0]||(a[0]=o=>e(s).materialBoxName=o),label:"料箱名称：",density:e(m)},null,8,["modelValue","density"])]),_:1}),t(r,{cols:"6",class:"text-center"},{default:l(()=>[t(b,{modelValue:e(s).materialBoxCode,"onUpdate:modelValue":a[1]||(a[1]=o=>e(s).materialBoxCode=o),label:"编号：",density:e(m)},null,8,["modelValue","density"])]),_:1}),t(r,{cols:"6",class:"text-center"},{default:l(()=>[t(b,{modelValue:e(s).materialBoxVolume,"onUpdate:modelValue":a[2]||(a[2]=o=>e(s).materialBoxVolume=o),label:"载重：",density:e(m)},null,8,["modelValue","density"])]),_:1}),t(r,{cols:"6",class:"text-center"}),t(r,{cols:"4",class:"text-center"},{default:l(()=>[t(B,{class:"ma-1",color:"#FF9800"},{default:l(()=>[g(" X轴方向 ")]),_:1})]),_:1}),t(r,{cols:"4",class:"text-center"},{default:l(()=>[t(B,{class:"ma-1",color:"#4CAF50"},{default:l(()=>[g(" Y轴方向 ")]),_:1})]),_:1}),t(r,{cols:"4",class:"text-center"},{default:l(()=>[t(B,{class:"ma-1",color:"#4CAF50"},{default:l(()=>[g(" Z轴方向 ")]),_:1})]),_:1}),t(r,{cols:"4"},{default:l(()=>[t(b,{modelValue:e(s).materialBoxLengthX,"onUpdate:modelValue":a[3]||(a[3]=o=>e(s).materialBoxLengthX=o),label:"尺寸：",density:e(m),suffix:"mm",class:"mb-2"},null,8,["modelValue","density"])]),_:1}),t(r,{cols:"4"},{default:l(()=>[t(b,{modelValue:e(s).materialBoxLengthY,"onUpdate:modelValue":a[4]||(a[4]=o=>e(s).materialBoxLengthY=o),label:"尺寸：",density:e(m),suffix:"mm",class:"mb-2"},null,8,["modelValue","density"])]),_:1}),t(r,{cols:"4"},{default:l(()=>[t(b,{modelValue:e(s).materialBoxLengthZ,"onUpdate:modelValue":a[5]||(a[5]=o=>e(s).materialBoxLengthZ=o),label:"尺寸：",density:e(m),suffix:"mm",class:"mb-2"},null,8,["modelValue","density"])]),_:1})]),_:1})]),_:1}))}},se={__name:"setting-box",setup(x){const{t:f}=F(),p=y([]),m=y(!0),s=v("density"),V=y();let d=[];setTimeout(()=>{m.value=!1},1e3);const a=()=>{U.boxList().then(u=>{p.value=u.rows,V.value=u.rows[0].id,o.value[1].slotData=u.rows[0]})},o=v("btnList");N(()=>{Y(()=>{o.value=[{name:"新增",color:"#42A5F5",size:"large",width:80,formWidth:800,slot:C(k),fn:({close:u,openLoading:c,closeLoading:i,diaFormRef:n})=>{c({text:"正在上传更新"}),n.submit().finally(()=>{u(),setTimeout(()=>{a(),i()},2e3)})}},{name:"编辑",color:"#00ACC1",size:"large",width:150,formWidth:800,slot:C(k),fn:({close:u,openLoading:c,closeLoading:i,diaFormRef:n})=>{c({text:"正在上传更新"}),n.submit().finally(()=>{u(),setTimeout(()=>{a(),i()},2e3)})}}]})});const A=y([{align:"start",sortable:!1,key:"exclusive",fixed:!0,width:70,minWidth:70},{title:f("名称"),align:"start",sortable:!1,key:"materialBoxName",minWidth:90},{title:f("编号"),key:"materialBoxCode",align:"center",sortable:!1,minWidth:90},{title:f("载重"),key:"materialBoxVolume",align:"center",sortable:!1,minWidth:90},{title:f("尺寸")+"（X-Y-Z）",key:"materialBoxLengthX",align:"center",sortable:!1,minWidth:90}]);return(u,c)=>(w(),D(R,{"fixed-header":"",headers:e(A),items:e(p),loading:e(m),"loading-text":"",hover:"",height:"calc(100vh - 175px)","expand-on-click":"",density:e(s),"onUpdate:options":a,"onUpdate:expanded":c[0]||(c[0]=i=>{i.map(n=>{e(d).includes(n)||(V.value=n,e(o)[1].slotData=e(p).filter(h=>h.id==n)[0])}),e(d).map(n=>{i.includes(n)||(V.value=n,e(o)[1].slotData=e(p).filter(h=>h.id==n)[0])}),Z(d)?d.value=i:d=i})},{"item.exclusive":l(({item:i})=>[t(E,{"model-value":i.id==e(V),readonly:""},null,8,["model-value"])]),"item.materialBoxLengthX":l(({item:i})=>[g(L(i.materialBoxLengthX)+"-"+L(i.materialBoxLengthY)+"-"+L(i.materialBoxLengthZ),1)]),loading:l(()=>[]),_:1},8,["headers","items","loading","density"]))}};export{se as default};
