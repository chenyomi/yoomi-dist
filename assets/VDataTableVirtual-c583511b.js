import{a as oe,r as ne,s as de,c as ue,d as ie,f as ce,u as me,t as ve,p as ge,g as he,v as be,i as pe,j as ye,k as fe,l as Te,n as V,o as x,q as D,w as Ve}from"./VDataTable-178ee7fd.js";import{m as xe,u as De,a as Ie}from"./VSelect-4ee12ab2.js";import{s as we,z as Se,T as r,c as h,A as I,W as Pe,D as Re,e as t,H as b,X as m}from"./index-db10600d.js";const ke=we({...oe(),...ne(),...xe(),...de()},"VDataTableVirtual"),Ee=Se()({name:"VDataTableVirtual",props:ke(),emits:{"update:modelValue":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0},setup(e,w){let{attrs:S,slots:a}=w;const{groupBy:n}=ue(e),{sortBy:d,multiSort:P,mustSort:R}=ie(e),{columns:u,headers:k,sortFunctions:B,filterFunctions:G}=ce(e,{groupBy:n,showSelect:r(e,"showSelect"),showExpand:r(e,"showExpand")}),{items:F}=me(e,u),p=r(e,"search"),{filteredItems:E}=ve(e,F,p,{transform:s=>s.columns,customKeyFilter:G}),{toggleSort:H}=ge({sortBy:d,multiSort:P,mustSort:R}),{sortByWithGroups:N,opened:z,extractRows:A,isGroupOpen:O,toggleGroup:U}=he({groupBy:n,sortBy:d}),{sortedItems:W}=be(e,E,N,B),{flatItems:v}=pe(W,n,z),i=h(()=>A(v.value)),{isSelected:_,select:j,selectAll:q,toggleSelect:C,someSelected:K,allSelected:X}=ye(e,{allItems:i,currentPage:i}),{isExpanded:J,toggleExpand:L}=fe(e),{containerRef:M,markerRef:Q,paddingTop:Y,paddingBottom:Z,computedItems:$,handleItemResize:ee,handleScroll:ae,handleScrollend:te}=De(e,v),le=h(()=>$.value.map(s=>s.raw));Te({sortBy:d,page:I(1),itemsPerPage:I(-1),groupBy:n,search:p}),Pe({VDataTableRows:{hideNoData:r(e,"hideNoData"),noDataText:r(e,"noDataText"),loading:r(e,"loading"),loadingText:r(e,"loadingText")}});const c=h(()=>({sortBy:d.value,toggleSort:H,someSelected:K.value,allSelected:X.value,isSelected:_,select:j,selectAll:q,toggleSelect:C,isExpanded:J,toggleExpand:L,isGroupOpen:O,toggleGroup:U,items:i.value.map(s=>s.raw),internalItems:i.value,groupedItems:v.value,columns:u.value,headers:k.value}));Re(()=>{const s=V.filterProps(e),se=x.filterProps(e),re=D.filterProps(e);return t(D,m({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},re),{top:()=>{var l;return(l=a.top)==null?void 0:l.call(a,c.value)},wrapper:()=>{var l,y;return t("div",{ref:M,onScrollPassive:ae,onScrollend:te,class:"v-table__wrapper",style:{height:b(e.height)}},[t("table",null,[t("thead",null,[t(V,m(s,{sticky:e.fixedHeader}),a)]),t("tbody",null,[t("tr",{ref:Q,style:{height:b(Y.value),border:0}},[t("td",{colspan:u.value.length,style:{height:0,border:0}},null)]),(l=a["body.prepend"])==null?void 0:l.call(a,c.value),t(x,m(S,se,{items:le.value}),{...a,item:o=>t(Ie,{key:o.internalItem.index,renderless:!0,"onUpdate:height":g=>ee(o.internalItem.index,g)},{default:g=>{var T;let{itemRef:f}=g;return((T=a.item)==null?void 0:T.call(a,{...o,itemRef:f}))??t(Ve,m(o.props,{ref:f,key:o.internalItem.index,index:o.internalItem.index}),a)}})}),(y=a["body.append"])==null?void 0:y.call(a,c.value),t("tr",{style:{height:b(Z.value),border:0}},[t("td",{colspan:u.value.length,style:{height:0,border:0}},null)])])])])},bottom:()=>{var l;return(l=a.bottom)==null?void 0:l.call(a,c.value)}})})}});export{Ee as V};
